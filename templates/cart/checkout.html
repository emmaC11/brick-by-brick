{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}
<div class="checkout-container h-screen pt-20 mx-20 ">
    {% if not request.user.is_authenticated %}
    <div class="mb-5">
        <div class="border p-4 rounded text-center">
            You are nearly finished with your order.
            Please <a href="#">Login</a> or <a href="#">Signup</a>
        </div>
    </div>
    {% else %}
    <form method="POST" class="address-form">
        {% csrf_token %}
        <div class="flex flex-col md:flex-row justify-center">
            <div class="billing-details md:w-1/4 mb-5 md:mb-0">
                <h2 class="text-black text-center text-xl font-semibold mb-3">Billing Details</h2>
                <hr class="mb-3" />
                {{ form|crispy }}
                <div class="form-group mt-3">
                    <button type="submit" class="bg-orange text-black font-semibold rounded-md py-3 w-full">
                        <i class="fa-brands fa-paypal"></i> Proceed to payment
                    </button>
                </div>
            </div>
            <div class="order-summary md:ml-5 md:w-1/4">
                <div class="border rounded p-4">
                    <h2 class="text-black text-center text-xl font-semibold mb-3">Order Summary</h2>
                    <table class="table site-block-order-table">
                        <tbody>
                            <tr>
                                <td>Subtotal</td>
                                <td>€{{ order.get_order_subtotal }}</td>
                            </tr>
                            <tr>
                                <td>Standard delivery</td>
                                <td>€5</td>
                            </tr>
                            <tr>
                                <td>Order Total</td>
                                <td class="text-black font-semibold">€{{ order.get_order_total }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </form>
    {% endif %}
</div>
{% endblock %}
